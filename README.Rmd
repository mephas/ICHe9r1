---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# ICHe9r1

<!-- badges: start -->
<!-- badges: end -->

The goal of ICHe9r1 is to estimate the treatment effect for time-to-event outcomes with intercurrent events under ICH E9 (R1).

## Installation

You can install the development version of ICHe9r1 from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("mephas/ICHe9r1")
```

## Method

The ICH E9 (R1) proposed five strategies to deal with intercurrent events: treatment policy strategy, 
composite variable strategy, hypothetical strategy, while on treatment strategy, and principal stratum 
strategy. To answer a specific scientific question, a specific strategy should be chosen before 
experimental design and analysis.

## Example

We use the bmt data to illustrate how to estimate the treatment effect. The primary event is death, and 
the intercurrent event is relapse. The time to the first event (either death or relapse) is t2. The event 
indicator is d4=d2+d3, so that d4=1 if death occurs first, while d4=2 if relapse occurs first.

```{r data}
library(ICHe9r1)
data(bmt)
A = as.numeric(bmt$group>1)
X = bmt[,c('z1','z3','z5')]
bmt = transform(bmt, d4=d2+d3)
```

Suppose we would like to use the hypothetical strategy (natural effects).
We fit the model by nonparametric estimation.

```{r nonparametric}
scr.ICH(A, bmt$t2, bmt$d4, "natural", X)
```


```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
